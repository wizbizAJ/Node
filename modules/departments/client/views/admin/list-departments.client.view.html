<div class="main-content" >
    <div class="wrap-content container" id="container">
        <!-- start: BREADCRUMB -->
        <div class="breadcrumb-wrapper">
            <h4 class="mainTitle no-margin">Department</h4>
            <span class="mainDescription">overview &amp; stats </span>
            <ul class="pull-right breadcrumb">
                <li>
                    <a href="/"><i class="fa fa-home margin-right-5 text-large text-dark"></i>Home</a>
                </li>
                <li>
                    Admin
                </li>
                <li>
                    Department
                </li>
            </ul>
        </div>
        <!-- end: BREADCRUMB -->

        <div class="container-fluid container-fullw">
            <div class="row">
                <div class="col-md-12">
                    <div class="panel panel-white">
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-sm-6">
                                    <div data-ng-if="vm.departments.length">
                                        <label>Show 
                                            <div class="clip-select inline-block">
                                                <select ng-model="vm.itemsPerPageSelection" ng-change="vm.changePerPage(vm.itemsPerPageSelection)" class="form-control input-sm m-wrap small">
                                                    <option value="5">5</option>
                                                    <option value="10">10</option>
                                                    <option value="25">25</option>
                                                    <option value="50">50</option>
                                                    <option value="100">100</option>
                                                    <option value="-1">All</option>
                                                </select>
                                            </div> Rows
                                        </label>                                   
                                    </div>
                                </div>
                                <div class="col-md-6 text-right" data-ng-if="vm.authentication.user.permissions['canCreateDepartment'] || vm.authentication.user.roles[0] === 'admin'">
                                    <a class="btn btn-green add-row" data-ui-sref="admin.departments.create">
                                        Add New <i class="fa fa-plus"></i>
                                    </a>
                                </div>
                            </div>
                            
                             <div class="row" data-ng-if="vm.departments.length">
                                <div class="col-md-12">
                                    <table class="table table-hover margin-bottom-0 dataTable" id="sample-table-1">
                                        <thead>
                                            <tr>
                                                <th class="center" style="width: 5%">
                                                  <div class="checkbox clip-check check-purple" data-ng-if="vm.authentication.user.permissions['canEditDepartment'] || vm.authentication.user.permissions['canDeleteState'] || vm.authentication.user.roles[0] === 'admin'">
                                                        <input type="checkbox" id="checkall" value="1" ng-model="vm.selectedAll" ng-click="vm.checkAll()">
                                                        <label for="checkall" class="btn-group my-btn-group">
                                                            <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="dataTableAction"> <span class="caret"></span> </a>
                                                            <ul role="menu" class="dropdown-menu dropdown-light pull-left">
                                                                <li class="dropdown-submenu" data-ng-if="vm.authentication.user.permissions['canEditDepartment'] || vm.authentication.user.roles[0] === 'admin'">
                                                                    <a href="javascript:void(0)">Is Active</a>
                                                                    <ul class="dropdown-menu">
                                                                        <li><a href="javascript:void(0)" ng-click="vm.updateCheck('Active')"><i class="fa fa-check-circle-o text-success"></i> Active</a></li>
                                                                        <li><a href="javascript:void(0)" ng-click="vm.updateCheck('Inactive')"><i class="fa fa-check-circle-o text-danger"></i> Inactive</a></li>
                                                                    </ul>
                                                                </li>
                                                                <li data-ng-if="vm.authentication.user.permissions['canDeleteDepartment'] || vm.authentication.user.roles[0] === 'admin'">
                                                                    <a href="javascript:void(0)" ng-click="vm.removeCheck()" > <i class="fa fa-times fa fa-white"></i> Remove </a>
                                                                </li>
                                                            </ul>
                                                        </label>
                                                    </div>
                                                </th>
                                                <th style="width: 10%">User Image</th>
                                                <th style="width: 25%" ng-class="(vm.sortType===false && vm.sort==='name') ? 'sorting_asc' : ((vm.sortType===true && vm.sort==='name') ? 'sorting_desc' : 'sorting')" ng-model="vm.sort" ng-click="vm.sort='name'; vm.sortType?vm.sortType=false:vm.sortType=true; vm.figureOutItemsToDisplay();">Name</th>
                                                <th style="width: 25%" ng-class="(vm.sortType===false && vm.sort==='Contact Name') ? 'sorting_asc' : ((vm.sortType===true && vm.sort==='Contact Name') ? 'sorting_desc' : 'sorting')" ng-model="vm.sort" ng-click="vm.sort='Contact Name'; vm.sortType?vm.sortType=false:vm.sortType=true; vm.figureOutItemsToDisplay();">Contact Name</th>
                                                <th style="width: 25%" ng-class="(vm.sortType===false && vm.sort==='Contact Number') ? 'sorting_asc' : ((vm.sortType===true && vm.sort==='Contact Number') ? 'sorting_desc' : 'sorting')" ng-model="vm.sort" ng-click="vm.sort='Contact Number'; vm.sortType?vm.sortType=false:vm.sortType=true; vm.figureOutItemsToDisplay();">Contact Number</th>
                                                <th style="width: 10%">User Email</th>
                                                <th style="width: 10%">User Mobile Number</th>
                                                <th style="width: 10%">User Phone Number</th>
                                                <th style="width: 10%">Status</th>
                                                <th style="width: 10%" ng-class="(vm.sortType===false && vm.sort==='updated') ? 'sorting_asc' : ((vm.sortType===true && vm.sort==='updated') ? 'sorting_desc' : 'sorting')" ng-model="vm.sort" ng-click="vm.sort='updated'; vm.sortType?vm.sortType=false:vm.sortType=true; vm.figureOutItemsToDisplay();">Updated on</th>
                                                <th style="width: 10%"></th>
                                            </tr>
                                            <tr>
                                                 <th></th>
                                                <th></th>
                                                <th>
                                                    <input type="text" ng-model="vm.name" class="form-control" ng-change="vm.figureOutItemsToDisplay()" />
                                                </th>
                                                <th>
                                                    <input type="text" ng-model="vm.contactName" class="form-control" ng-change="vm.figureOutItemsToDisplay()" />
                                                </th>
                                                <th>
                                                    <input type="text" ng-model="vm.contactNumber" class="form-control" ng-change="vm.figureOutItemsToDisplay()" />
                                                </th>
                                                <th></th>
                                                <th></th>
                                                <th></th>
                                                <th>
                                                    <select ng-model="vm.status" class="form-control" ng-change="vm.figureOutItemsToDisplay()">
                                                        <option value="">All</option>
                                                        <option value="Active">Active</option>
                                                        <option value="Inactive">Inactive</option>
                                                    </select>
                                                </th>
                                                <th>
                                                    <input type="text" ng-model="vm.updated" class="form-control" ng-change="vm.figureOutItemsToDisplay()" />
                                                </th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr data-ng-repeat="department in vm.pagedItems" ng-class="department.default==='Yes'?'success':''">
                                                <td class="center">
                                                    <div class="checkbox clip-check check-purple" data-ng-if="vm.authentication.user.permissions['canEditDepartment'] || vm.authentication.user.permissions['canDeleteDepartment'] || vm.authentication.user.roles[0] === 'admin'">
                                                        <input type="checkbox" class="hasAll" id="checkbox_{{department._id}}" value="{{department._id}}" ng-model="department.Selected" >
                                                        <label for="checkbox_{{department._id}}">&nbsp;</label>
                                                    </div>
                                                </td>
                                                <td >
                                                    <img ng-src="/{{department.userId.profileImageURL}}" alt="{{department.userId.displayName}}" style="height: 35px;" class="img-rounded" ng-if="department.userId.displayName"  />
                                                    <img ng-src="/modules/users/client/img/profile/default.png" alt="{{department.userId.displayName}}" style="height: 35px;" class="img-rounded" ng-if="!department.userId.displayName" />
                                                    
                                                <td data-ng-bind="department.name"></td>
                                                <td data-ng-bind="department.contactName"></td>
                                                <td data-ng-bind="department.contactNumber"></td>
                                                <td data-ng-bind="department.userId.email"></td>
                                                <td data-ng-bind="department.userId.mobileNumber"></td>
                                                <td data-ng-bind="department.userId.phoneNumber"></td>
                                                <td>
                                                    <a data-ng-if="vm.authentication.user.permissions['canEditDepartment'] || vm.authentication.user.roles[0] === 'admin'"   href="javascript:void(0)" ng-click="vm.updateStatus(department,(department.status==='Active') ? 'Inactive' : 'Active')"><span ng-class="(department.status==='Active') ? 'label label-success' : 'label label-danger'" ng-bind="department.status"></span></a>
                                                    <span data-ng-if="!vm.authentication.user.permissions['canEditDepartment'] && vm.authentication.user.roles[0] != 'admin'" ng-class="(department.status==='Active') ? 'label label-success' : 'label label-danger'" ng-bind="department.status"></span>
                                                </td>
                                                <td data-ng-bind="department.updated | date:'dd-MM-yyyy'"></td> <!-- mediumDate -->
                                                <td class="center">
                                                    <div class="visible-md visible-lg hidden-sm hidden-xs">
                                                        <a data-ng-if="vm.authentication.user.permissions['canEditDepartment'] || vm.authentication.user.roles[0] === 'admin'"  data-ui-sref="admin.departments.edit({departmentId: department._id})" class="btn btn-transparent btn-xs" title="Edit"><i class="fa fa-pencil"></i></a>
                                                        <a data-ng-if="vm.authentication.user.permissions['canDeleteDepartment'] || vm.authentication.user.roles[0] === 'admin'"   ng-click="vm.remove(department)" href="javascript:void(0)" class="btn btn-transparent btn-xs" title="Remove"><i class="fa fa-times fa fa-white"></i></a>
                                                    </div>
                                                    <div class="visible-xs visible-sm hidden-md hidden-lg">
                                                        <div class="btn-group dropdown ">
                                                            <button type="button" class="btn btn-primary btn-o btn-sm dropdown-toggle" data-toggle="dropdown">
                                                                <i class="fa fa-cog"></i>&nbsp;<span class="caret"></span>
                                                            </button>
                                                            <ul class="dropdown-menu pull-right dropdown-light" role="menu">
                                                                <li data-ng-if="vm.authentication.user.permissions['canEditDepartment'] || vm.authentication.user.roles[0] === 'admin'">
                                                                    <a data-ui-sref="admin.departments.edit({departmentId: department._id})"> Edit </a>
                                                                </li>
                                                                <li data-ng-if="vm.authentication.user.permissions['canDeleteDepartment'] || vm.authentication.user.roles[0] === 'admin'">
                                                                    <a ng-click="vm.remove(department)" href="javascript:void(0)"> Remove </a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr data-ng-if="!vm.pagedItems.length">
                                                <td colspan="6" style="text-align: center">
                                                    No data available in table
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <div class="row">
                                        <div class="col-md-4 margin-top-20 margin-bottom-20">
                                            Showing {{vm.begin+1}} to {{(vm.end > vm.filterLength)? vm.filterLength : vm.end}} of {{vm.filterLength}} entries
                                        </div>
                                        <div class="col-md-8 text-right">
                                            <uib-pagination boundary-links="true" max-size="8" items-per-page="vm.itemsPerPage" total-items="vm.filterLength" ng-model="vm.currentPage" ng-change="vm.pageChanged()"></uib-pagination>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="alert alert-warning text-center margin-top-20" data-ng-if="!vm.departments.length">
                                No Department yet, <span data-ng-if="vm.authentication.user.permissions['canCreateDepartment'] || vm.authentication.user.roles[0] === 'admin'">why don't you <a data-ui-sref="admin.departments.create">create one</a>?</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
